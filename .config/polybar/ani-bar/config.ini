; ==========================================================
;   Gruvbox Neon - The Final Design Pass
; ==========================================================

[bar/main_bar]
width = 98.5%
height = 32
offset-x = 0.75%
offset-y = 10
fixed-center = true
bottom = false

background = #00000000
pseudo-transparency = false

foreground = ${gruvbox.fg}
font-0 = "JetBrainsMono Nerd Font:style=Bold:size=10;3"

modules-left = launcher sep i3
modules-center = spotify
modules-right = cpu mem pulseaudio sep backlight sep battery sep date sep tray

enable-ipc = true
wm-restack = i3

; ==========================================================
;               COLORS (Self-Contained)
; ==========================================================
[gruvbox]
bg_dark = #282828
bg_module = #3c3836
bg_dim = #504945
bg_purple = #b16286
bg_aqua = #689d6a
bg_blue = #458588
bg_red = #cc241d
bg_yellow = #d79921
bg_green = #98971a

fg = #ebdbb2
fg_dark = #a89984
fg_black = #1d2021

; ==========================================================
;               CORE MODULES
; ==========================================================

[module/sep]
type = custom/text
format = <label>
label = "|"
label-foreground = ${gruvbox.bg_dim}

; --- LEFT ---
[module/launcher]
type = custom/text
format = " 󰣇 "
background = ${gruvbox.bg_purple}
foreground = ${gruvbox.fg_black}
radius = 6
click-left = rofi -show drun

[module/i3]
type = internal/i3
pin-workspaces = true
strip-wsnumbers = true
index-sort = true
background = ${gruvbox.bg_module}
padding = 1
radius = 6

ws-icon-0 = 1; 
ws-icon-1 = 2; 󰈹
ws-icon-2 = 3; 
ws-icon-default = ""

format = <label-state>
; INSANE FOCUS ANIMATION: Invert the block for the focused workspace
label-focused = %icon%
label-focused-padding = 1
label-focused-background = ${gruvbox.bg_yellow}
label-focused-foreground = ${gruvbox.fg_black}

label-unfocused = %icon%
label-unfocused-padding = 1
label-unfocused-foreground = ${gruvbox.fg_dark}

; --- CENTER ---
[module/spotify]
type = custom/script
tail = true
interval = 1
format-prefix = "󰓇 "
format-prefix-foreground = ${gruvbox.bg_green}
format = <label>
label-maxlen = 35
exec = sh ~/.config/polybar/scripts/scroll_spotify_status.sh
background = ${gruvbox.bg_module}
radius = 6
padding = 1
click-left = playerctl play-pause --player=spotify
click-right = playerctl next --player=spotify
click-middle = playerctl previous --player=spotify

; --- RIGHT ---

[module/cpu]
type = internal/cpu
interval = 2
format = <label>
label = "%{F#1d2021}%{F-} %percentage:2%%"
background = ${gruvbox.bg_blue}
foreground = ${gruvbox.fg_black}
padding = 2
radius-left = 6

[module/memory]
type = internal/memory
interval = 2
format = <label>
label = "%{F#1d2021}%{F-} %mb_used%"
background = ${gruvbox.bg_blue}
foreground = ${gruvbox.fg_black}
padding = 2

[module/pulseaudio]
type = internal/pulseaudio
format-volume = <label-volume>
label-volume = "%{F#1d2021}%{F-} %percentage%%"
label-muted = "󰖁 Muted"
background = ${gruvbox.bg_blue}
foreground = ${gruvbox.fg_black}
padding = 2
radius-right = 6

[module/backlight]
type = internal/backlight
card = intel_backlight
format = <label>
label = "%{F#1d2021}󰃠%{F-} %percentage%%"
background = ${gruvbox.bg_yellow}
foreground = ${gruvbox.fg_black}
padding = 1
radius = 6
enable-scroll = true

[module/battery]
type = internal/battery
battery = BAT1
adapter = ACAD
full-at = 99
format-charging = <animation-charging> <label-charging>
label-charging = "%percentage%%"
format-discharging = <ramp-capacity> <label-discharging>
label-discharging = "%percentage%%"
format-full = "  Full"
ramp-capacity-0 = 
ramp-capacity-1 = 
ramp-capacity-2 = 
ramp-capacity-3 = 
ramp-capacity-4 = 
ramp-capacity-foreground = ${gruvbox.fg_black}
animation-charging-0 = 
animation-charging-1 = 
animation-charging-2 = 
animation-charging-3 = 
animation-charging-4 = 
animation-charging-framerate = 750
animation-charging-foreground = ${gruvbox.fg_black}
background = ${gruvbox.bg_green}
foreground = ${gruvbox.fg_black}
padding = 1
radius = 6

[module/date]
type = internal/date
interval = 5
time = %I:%M %p
format = <label>
label = "%{F#1d2021}%{F-} %time%"
background = ${gruvbox.bg_aqua}
foreground = ${gruvbox.fg_black}
padding = 1
radius = 6

[module/tray]
type = internal/tray
background = ${gruvbox.bg_dark}
radius = 6
padding = 1
